## 性能优化清单

- 使用 **CDN** 加速静态资源访问

- 合理使用缓存

  - 强缓存

    > 当在 HTTP 头部设置了 `Cache-Control: max-age=xxx` 时，代表使用了强缓存；浏览器会使用本地缓存除非缓存过期；

  - 协商缓存

    > 浏览器会向服务器询问缓存是否可以，返回 304 代表可继续使用，200 代表使用最新的。

- 减少 HTTP 请求

  - CSS/JS 合并打包
  - 雪碧图
  - 小图片使用 base64格式 或者 iconfont

- 减少静态资源大小

  - 压缩 CSS/JS 代码

    > 一般使用 gulp, webpack, rollup, parcel 等构件根据直接压缩

  - 压缩图片大小

    > 可以使用在线工具：[tinypng](<https://tinypng.com/>)

  - 保持代码的精简高效

    > 优化你的 HTML 代码，减少不必要的元素和嵌套

  - 服务端开启 gzip 或者 deflate 压缩

- 减少 DNS 查询时间

  > 尽量减少页面上需要 DNS 查询的域名数量，保持和并行下载数一致即可；
  >
  > 也可通过 dns-prefetch 开启预查询

- 避免重定向

- 尽量减少使用 iframe

  > 优点：
  >
  > - 可以用来加载速度较慢的第三方资源，如广告、徽章；
  > - 可用作[安全沙箱](http://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/)；
  > - 可以并行下载脚本。
  >
  > 缺点：
  >
  > - 加载代价昂贵，即使是空的页面；
  >
  > - 阻塞页面 `load` 事件触发；
  >
  >   > iframe 完全加载以后，父页面才会触发 `load` 事件。 Safari、Chrome 中通过 JavaScript 动态设置 iframe `src` 可以避免这个问题。
  >
  > - 缺乏语义。

- 避免内存溢出

- 延迟加载

  > 延迟加载是指，只在用户可见或者可交互时才进行加载的动作，包括：
  >
  > - 图片懒加载
  > - 代码延迟执行
  > - HTML 片段延迟插入

- 资源预加载

- 尽可能使用语义化的标签

- 为图片提供 alt 属性

- 为不同类别的内容提供不同的域名

  > 由于浏览器对一个域名有并行线程的限制（一般是 6 个），增加域名数量显然能增加并行线程的数量；
  >
  > 但是，尽量控制在 2-4 个域名左右，避免 DNS 查询过慢；
  >
  > 例如，动态内容一个域名，静态内容一个域名，这样还可以禁用静态资源域下的 Cookie，减少数据传输

- 减少 cookie 大小

  > 由于 HTTP 机制，每一次的 HTTP 请求都会把当前页面的 cookie 携带发送给服务器，如果 cookie 过大，会影响传输的性能；因此需要对此进行优化：
  >
  > - 去除不必要的 cookie
  > - 为 cookie 设置域名，只在需要的域名设置对应的 cookie
  > - 设置恰当的过期时间
  > - 静态域名一般无需设置 cookie

- 把样式表放在 `<head>` 之间，使得页面能尽早按照正确的样式展现，用户体验更好

- 把脚本放在页面底部，因为脚本加载会阻塞 DOM 的渲染

- 减少 DOM 操作次数

  > DOM 结构的改变会导致页面回流和重绘

- 使用**防抖**和**节流**函数避免高频率操作导致卡顿



## 参考

[1] [前端性能优化的常用手段](<https://juejin.im/post/59672fbff265da6c3f70cd53>)

[2] [前端性能优化最佳实践](<https://csspod.com/frontend-performance-best-practices/>)