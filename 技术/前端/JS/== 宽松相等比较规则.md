# 宽松相等比较

宽松相等运算符的转换：

- 引用类型之间的比较

  > 除非是同一引用，否则返回 false

- 与原始值比较

  - null, undefined 之间比较相等，与其他原始值比较不相等

  - 与数值比较

    - 另一方也是原始值

      > 通过 `toNumber` 将另一个值转为数值，之后再进行比较
      >
      > 注意：所有的“假值”会被转换为 0

    - 另一方是引用类型

      > 先调用 `valueOf()`，再调用 `toString()` 方法；
      >
      > 如果 `valueOf()` 的结果是原始值，使用该原始值进行对比，否则接着调用 `toString()` 方法；
      >
      > 如果 `toString()` 的结果是原始值，使用该原始值进行对比，否则直接报错；
      >
      > 如果以上方法均未定义，则直接报错；

  - 与字符串比较

    - 另一方也是原始值

      > 如果是数值按照上方数值规则比较

      > 通过 `toString` 将另一个值转为字符串，之后再进行比较

    - 另一方是引用类型

      > 先调用 `valueOf()`，再调用 `toString()` 方法；
      >
      > 如果 `valueOf()` 的结果是原始值，使用该原始值进行对比，否则接着调用 `toString()` 方法；
      >
      > 如果 `toString()` 的结果是原始值，使用该原始值进行对比，否则直接报错；
      >
      > 如果以上方法均未定义，则直接报错；

  - 与布尔值比较

    - 另一方也是原始值

      > “假值”的原始值为 false, 其他为 true，然后进行对比
      >
      > “假值”包括：null, undefined, false, NaN, 空字符串, -0, +0, 0

    - 另一方是引用类型

      > 任何引用类型通过 `toBoolean` 得到的结果都是 true，然后进行对比