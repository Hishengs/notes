# 宽松相等比较

宽松相等运算符的转换：

- 引用类型之间的比较

  > 除非是同一引用，否则返回 false

- 与原始值比较

  - null, undefined 之间比较相等，与其他原始值比较不相等

  - 与数值比较

    - 另一方也是原始值

      > 通过 `toNumber` 将另一个值转为数值，之后再进行比较
      >
      > 注意：所有的“假值”会被转换为 0

    - 另一方是引用类型

      > 先调用 `valueOf()`，再调用 `toString()` 方法；
      >
      > 如果 `valueOf()` 的结果是原始值，使用该原始值进行对比，否则接着调用 `toString()` 方法；
      >
      > 如果 `toString()` 的结果是原始值，使用该原始值进行对比，否则直接报错；
      >
      > 如果以上方法均未定义，则直接报错；

  - 与字符串比较

    - 另一方也是原始值

      > 如果是数值按照上方数值规则比较
      > 
      > 如果另一方是布尔值，将布尔值转为数值，再按照数值进行比较
      > 
      > 通过 `toString` 将另一个值转为字符串，之后再进行比较

    - 另一方是引用类型

      > 先调用 `valueOf()`，再调用 `toString()` 方法；
      >
      > 如果 `valueOf()` 的结果是原始值，使用该原始值进行对比，否则接着调用 `toString()` 方法；
      >
      > 如果 `toString()` 的结果是原始值，使用该原始值进行对比，否则直接报错；
      >
      > 如果以上方法均未定义，则直接报错；

  - 与布尔值比较

    - 另一方也是原始值

      > 如果另一方是数值，则将布尔值转为数值进行比较
      >
      > 如果另一方是字符串，将双方转为数值进行比较
      > 
      > 其他原始值比较结果为 false

    - 另一方是引用类型

      > 调用 `valueOf()` 方法，如果结果是原始值，使用该原始值进行对比，否则比较结果为 false


## 参考资料
- [Abstract Equality Comparison](https://262.ecma-international.org/6.0/#sec-abstract-equality-comparison)
- [Abstract Relational Comparison](https://262.ecma-international.org/6.0/#sec-abstract-relational-comparison)
