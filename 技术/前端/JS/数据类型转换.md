## 强制转换

### 转为基本类型

- 转 String

  - null 和 undefined 转为字符串 `'null'` 和 `'undefined'`

  - Number 直接转为字符串数字

  - Boolean 转为字符串 `'true'` 或者 `'false'`

  - 引用类型转换

    > 先调用引用类型的 `toString()` 方法，再调用 `valueOf()` 方法；
    >
    > 如果两个方法都不存在或者得到的结果不是原始值（primitive value）则直接报错，否则按照原始值规则转换。

- 转 Number

  - undefined 转换结果为 `NaN`

  - null 转换结果为 `0`

  - 字符串，如果是字符串数字，则直接转换为数字，如果是空字符串转为 0，其他得到的结果都是 `NaN`.

  - 布尔值，true 转为 1，false 转为 0.

  - 引用类型转换

    > 先调用引用类型的 `valueOf()` 方法，再调用 `toString()` 方法；
    >
    > 如果两个方法都不存在或者得到的结果不是原始值（primitive value）则直接报错，否则按照原始值规则转换。

- 转 Boolean

  > 如果是**假值**（false, 0, null, undefined, ''（空字符串）, NaN（非法数字）），转化结果是 false，否则是 true.

### 转为引用类型

- 转 Object
  - null 和 undefined 转化结果都是对象字面量 {}。
  - 字符串、布尔值，数字转对象结果是相对应的包装对象 String(), Boolean(), Number()。
  - 其他引用类型转化结果是其 `valueOf()` 的执行结果。
- 其他引用类型：略



## 隐式转换

### 算术运算符转换

- 如果是加法运算

  - 存在一边是字符串，则另一边按照字符串类型转换，之后进行字符串拼接；

  - 不存在一边是字符串，但存在一边是数值，则另一边进行数字转化，之后按照数值相加；

  - 以上两种情况都不存在

    - 如果存在原始值，对其进行 `toNumber` 转换

    - 如果存在引用类型，对其进行 `toPrimitive` 得到原始值，再进行  `toNumber` 转换

      > 这一步仍有可能得出的原始值是字符串，则还是按照 **字符串+数值** 的规则转化

    - 进行算术运算

- 另外三种算术运算符（减、乘、除）

  - 如果存在原始值，对其进行 `toNumber` 转换
  - 如果存在引用类型，对其进行 `toPrimitive` 得到原始值，再进行  `toNumber` 转换
  - 进行算术运算

### 相等运算符转换

主要指的是宽松相等运算符的转换：

- 引用类型之间的比较

  > 除非是同一引用，否则返回 false

- 与原始值比较

  - null, undefined 之间比较相等，与其他原始值比较不相等

  - 与数值比较

    - 另一方也是原始值

      > 通过 `toNumber` 将另一个值转为数值，之后再进行比较
      >
      > 注意：所有的“假值”会被转换为 0

    - 另一方是引用类型

      > 先调用 `valueOf()`，再调用 `toString()` 方法；
      >
      > 如果 `valueOf()` 的结果是原始值，使用该原始值进行对比，否则接着调用 `toString()` 方法；
      >
      > 如果 `toString()` 的结果是原始值，使用该原始值进行对比，否则直接报错；
      >
      > 如果以上方法均未定义，则直接报错；

  - 与字符串比较

    - 另一方也是原始值

      > 如果是数值按照上方数值规则比较

      > 通过 `toString` 将另一个值转为字符串，之后再进行比较

    - 另一方是引用类型

      > 先调用 `valueOf()`，再调用 `toString()` 方法；
      >
      > 如果 `valueOf()` 的结果是原始值，使用该原始值进行对比，否则接着调用 `toString()` 方法；
      >
      > 如果 `toString()` 的结果是原始值，使用该原始值进行对比，否则直接报错；
      >
      > 如果以上方法均未定义，则直接报错；

  - 与布尔值比较

    - 另一方也是原始值

      > “假值”的原始值为 false, 其他为 true，然后进行对比
      >
      > “假值”包括：null, undefined, false, NaN, 空字符串, -0, +0, 0

    - 另一方是引用类型

      > 任何引用类型通过 `toBoolean` 得到的结果都是 true，然后进行对比
